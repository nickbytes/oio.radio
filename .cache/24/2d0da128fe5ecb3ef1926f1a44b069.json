{"id":"i9Hk","dependencies":[{"name":"/Users/m/www/oio/land/oio.radio/package.json","includedInParent":true,"mtime":1585391671622},{"name":"/Users/m/www/oio/land/oio.radio/node_modules/request/package.json","includedInParent":true,"mtime":1585257763171},{"name":"http","loc":{"line":3,"column":19},"parent":"/Users/m/www/oio/land/oio.radio/node_modules/request/request.js","resolved":"/Users/m/.config/yarn/global/node_modules/stream-http/index.js"},{"name":"https","loc":{"line":4,"column":20},"parent":"/Users/m/www/oio/land/oio.radio/node_modules/request/request.js","resolved":"/Users/m/.config/yarn/global/node_modules/https-browserify/index.js"},{"name":"url","loc":{"line":5,"column":18},"parent":"/Users/m/www/oio/land/oio.radio/node_modules/request/request.js","resolved":"/Users/m/.config/yarn/global/node_modules/url/url.js"},{"name":"util","loc":{"line":6,"column":19},"parent":"/Users/m/www/oio/land/oio.radio/node_modules/request/request.js","resolved":"/Users/m/.config/yarn/global/node_modules/util/util.js"},{"name":"stream","loc":{"line":7,"column":21},"parent":"/Users/m/www/oio/land/oio.radio/node_modules/request/request.js","resolved":"/Users/m/.config/yarn/global/node_modules/stream-browserify/index.js"},{"name":"zlib","loc":{"line":8,"column":19},"parent":"/Users/m/www/oio/land/oio.radio/node_modules/request/request.js","resolved":"/Users/m/.config/yarn/global/node_modules/browserify-zlib/lib/index.js"},{"name":"aws-sign2","loc":{"line":9,"column":19},"parent":"/Users/m/www/oio/land/oio.radio/node_modules/request/request.js","resolved":"/Users/m/www/oio/land/oio.radio/node_modules/aws-sign2/index.js"},{"name":"aws4","loc":{"line":10,"column":19},"parent":"/Users/m/www/oio/land/oio.radio/node_modules/request/request.js","resolved":"/Users/m/www/oio/land/oio.radio/node_modules/aws4/aws4.js"},{"name":"http-signature","loc":{"line":11,"column":28},"parent":"/Users/m/www/oio/land/oio.radio/node_modules/request/request.js","resolved":"/Users/m/www/oio/land/oio.radio/node_modules/http-signature/lib/index.js"},{"name":"mime-types","loc":{"line":12,"column":19},"parent":"/Users/m/www/oio/land/oio.radio/node_modules/request/request.js","resolved":"/Users/m/www/oio/land/oio.radio/node_modules/mime-types/index.js"},{"name":"caseless","loc":{"line":13,"column":23},"parent":"/Users/m/www/oio/land/oio.radio/node_modules/request/request.js","resolved":"/Users/m/www/oio/land/oio.radio/node_modules/caseless/index.js"},{"name":"forever-agent","loc":{"line":14,"column":27},"parent":"/Users/m/www/oio/land/oio.radio/node_modules/request/request.js","resolved":"/Users/m/www/oio/land/oio.radio/node_modules/forever-agent/index.js"},{"name":"form-data","loc":{"line":15,"column":23},"parent":"/Users/m/www/oio/land/oio.radio/node_modules/request/request.js","resolved":"/Users/m/www/oio/land/oio.radio/node_modules/form-data/lib/browser.js"},{"name":"extend","loc":{"line":16,"column":21},"parent":"/Users/m/www/oio/land/oio.radio/node_modules/request/request.js","resolved":"/Users/m/www/oio/land/oio.radio/node_modules/extend/index.js"},{"name":"isstream","loc":{"line":17,"column":23},"parent":"/Users/m/www/oio/land/oio.radio/node_modules/request/request.js","resolved":"/Users/m/www/oio/land/oio.radio/node_modules/isstream/isstream.js"},{"name":"is-typedarray","loc":{"line":18,"column":27},"parent":"/Users/m/www/oio/land/oio.radio/node_modules/request/request.js","resolved":"/Users/m/www/oio/land/oio.radio/node_modules/is-typedarray/index.js"},{"name":"./lib/helpers","loc":{"line":19,"column":22},"parent":"/Users/m/www/oio/land/oio.radio/node_modules/request/request.js","resolved":"/Users/m/www/oio/land/oio.radio/node_modules/request/lib/helpers.js"},{"name":"./lib/cookies","loc":{"line":20,"column":22},"parent":"/Users/m/www/oio/land/oio.radio/node_modules/request/request.js","resolved":"/Users/m/www/oio/land/oio.radio/node_modules/request/lib/cookies.js"},{"name":"./lib/getProxyFromURI","loc":{"line":21,"column":30},"parent":"/Users/m/www/oio/land/oio.radio/node_modules/request/request.js","resolved":"/Users/m/www/oio/land/oio.radio/node_modules/request/lib/getProxyFromURI.js"},{"name":"./lib/querystring","loc":{"line":22,"column":26},"parent":"/Users/m/www/oio/land/oio.radio/node_modules/request/request.js","resolved":"/Users/m/www/oio/land/oio.radio/node_modules/request/lib/querystring.js"},{"name":"./lib/har","loc":{"line":23,"column":18},"parent":"/Users/m/www/oio/land/oio.radio/node_modules/request/request.js","resolved":"/Users/m/www/oio/land/oio.radio/node_modules/request/lib/har.js"},{"name":"./lib/auth","loc":{"line":24,"column":19},"parent":"/Users/m/www/oio/land/oio.radio/node_modules/request/request.js","resolved":"/Users/m/www/oio/land/oio.radio/node_modules/request/lib/auth.js"},{"name":"./lib/oauth","loc":{"line":25,"column":20},"parent":"/Users/m/www/oio/land/oio.radio/node_modules/request/request.js","resolved":"/Users/m/www/oio/land/oio.radio/node_modules/request/lib/oauth.js"},{"name":"./lib/hawk","loc":{"line":26,"column":19},"parent":"/Users/m/www/oio/land/oio.radio/node_modules/request/request.js","resolved":"/Users/m/www/oio/land/oio.radio/node_modules/request/lib/hawk.js"},{"name":"./lib/multipart","loc":{"line":27,"column":24},"parent":"/Users/m/www/oio/land/oio.radio/node_modules/request/request.js","resolved":"/Users/m/www/oio/land/oio.radio/node_modules/request/lib/multipart.js"},{"name":"./lib/redirect","loc":{"line":28,"column":23},"parent":"/Users/m/www/oio/land/oio.radio/node_modules/request/request.js","resolved":"/Users/m/www/oio/land/oio.radio/node_modules/request/lib/redirect.js"},{"name":"./lib/tunnel","loc":{"line":29,"column":21},"parent":"/Users/m/www/oio/land/oio.radio/node_modules/request/request.js","resolved":"/Users/m/www/oio/land/oio.radio/node_modules/request/lib/tunnel.js"},{"name":"performance-now","loc":{"line":30,"column":18},"parent":"/Users/m/www/oio/land/oio.radio/node_modules/request/request.js","resolved":"/Users/m/www/oio/land/oio.radio/node_modules/performance-now/lib/performance-now.js"},{"name":"safe-buffer","loc":{"line":31,"column":21},"parent":"/Users/m/www/oio/land/oio.radio/node_modules/request/request.js","resolved":"/Users/m/www/oio/land/oio.radio/node_modules/safe-buffer/index.js"}],"generated":{"js":"\n\"use strict\";var e=require(\"http\"),t=require(\"https\"),r=require(\"url\"),i=require(\"util\"),o=require(\"stream\"),s=require(\"zlib\"),n=require(\"aws-sign2\"),a=require(\"aws4\"),h=require(\"http-signature\"),u=require(\"mime-types\"),p=require(\"caseless\"),c=require(\"forever-agent\"),d=require(\"form-data\"),l=require(\"extend\"),m=require(\"isstream\"),f=require(\"is-typedarray\").strict,g=require(\"./lib/helpers\"),y=require(\"./lib/cookies\"),b=require(\"./lib/getProxyFromURI\"),v=require(\"./lib/querystring\").Querystring,_=require(\"./lib/har\").Har,q=require(\"./lib/auth\").Auth,k=require(\"./lib/oauth\").OAuth,w=require(\"./lib/hawk\"),H=require(\"./lib/multipart\").Multipart,S=require(\"./lib/redirect\").Redirect,x=require(\"./lib/tunnel\").Tunnel,T=require(\"performance-now\"),E=require(\"safe-buffer\").Buffer,j=g.safeStringify,O=g.isReadStream,C=g.toBase64,R=g.defer,z=g.copy,U=g.version,A=y.jar(),N={};function P(e,t){var r={};for(var i in t){-1===e.indexOf(i)&&(r[i]=t[i])}return r}function L(e,t){var r={};for(var i in t){var o=!(-1===e.indexOf(i)),s=\"function\"==typeof t[i];o&&s||(r[i]=t[i])}return r}function M(){return{uri:this.uri,method:this.method,headers:this.headers}}function D(){return{statusCode:this.statusCode,body:this.body,headers:this.headers,request:M.call(this.request)}}function I(e){e.har&&(this._har=new _(this),e=this._har.options(e)),o.Stream.call(this);var t=Object.keys(I.prototype),r=P(t,e);l(this,r),e=L(t,e),this.readable=!0,this.writable=!0,e.method&&(this.explicitMethod=!0),this._qs=new v(this),this._auth=new q(this),this._oauth=new k(this),this._multipart=new H(this),this._redirect=new S(this),this._tunnel=new x(this),this.init(e)}function B(){I.debug&&console.error(\"REQUEST %s\",i.format.apply(i,arguments))}i.inherits(I,o.Stream),I.debug=void 0,I.prototype.debug=B,I.prototype.init=function(i){var o=this;for(var s in i||(i={}),o.headers=o.headers?z(o.headers):{},o.headers)void 0===o.headers[s]&&delete o.headers[s];if(p.httpify(o,o.headers),o.method||(o.method=i.method||\"GET\"),o.localAddress||(o.localAddress=i.localAddress),o._qs.init(i),B(i),o.pool||!1===o.pool||(o.pool=N),o.dests=o.dests||[],o.__isRequestRequest=!0,!o._callback&&o.callback&&(o._callback=o.callback,o.callback=function(){o._callbackCalled||(o._callbackCalled=!0,o._callback.apply(o,arguments))},o.on(\"error\",o.callback.bind()),o.on(\"complete\",o.callback.bind(o,null))),!o.uri&&o.url&&(o.uri=o.url,delete o.url),o.baseUrl){if(\"string\"!=typeof o.baseUrl)return o.emit(\"error\",new Error(\"options.baseUrl must be a string\"));if(\"string\"!=typeof o.uri)return o.emit(\"error\",new Error(\"options.uri must be a string when using options.baseUrl\"));if(0===o.uri.indexOf(\"//\")||-1!==o.uri.indexOf(\"://\"))return o.emit(\"error\",new Error(\"options.uri must be a path when using options.baseUrl\"));var n=o.baseUrl.lastIndexOf(\"/\")===o.baseUrl.length-1,a=0===o.uri.indexOf(\"/\");n&&a?o.uri=o.baseUrl+o.uri.slice(1):n||a?o.uri=o.baseUrl+o.uri:\"\"===o.uri?o.uri=o.baseUrl:o.uri=o.baseUrl+\"/\"+o.uri,delete o.baseUrl}if(!o.uri)return o.emit(\"error\",new Error(\"options.uri is a required argument\"));if(\"string\"==typeof o.uri&&(o.uri=r.parse(o.uri)),o.uri.href||(o.uri.href=r.format(o.uri)),\"unix:\"===o.uri.protocol)return o.emit(\"error\",new Error(\"`unix://` URL scheme is no longer supported. Please use the format `http://unix:SOCKET:PATH`\"));if(\"unix\"===o.uri.host&&o.enableUnixSocket(),!1===o.strictSSL&&(o.rejectUnauthorized=!1),o.uri.pathname||(o.uri.pathname=\"/\"),!(o.uri.host||o.uri.hostname&&o.uri.port||o.uri.isUnix)){var h='Invalid URI \"'+r.format(o.uri)+'\"';return 0===Object.keys(i).length&&(h+=\". This can be caused by a crappy redirection.\"),o.abort(),o.emit(\"error\",new Error(h))}if(o.hasOwnProperty(\"proxy\")||(o.proxy=b(o.uri)),o.tunnel=o._tunnel.isEnabled(),o.proxy&&o._tunnel.setup(i),o._redirect.onRequest(i),o.setHost=!1,!o.hasHeader(\"host\")){var d=o.originalHostHeaderName||\"host\";o.setHeader(d,o.uri.host),o.uri.port&&(\"80\"===o.uri.port&&\"http:\"===o.uri.protocol||\"443\"===o.uri.port&&\"https:\"===o.uri.protocol)&&o.setHeader(d,o.uri.hostname),o.setHost=!0}if(o.jar(o._jar||i.jar),o.uri.port||(\"http:\"===o.uri.protocol?o.uri.port=80:\"https:\"===o.uri.protocol&&(o.uri.port=443)),o.proxy&&!o.tunnel?(o.port=o.proxy.port,o.host=o.proxy.hostname):(o.port=o.uri.port,o.host=o.uri.hostname),i.form&&o.form(i.form),i.formData){var l=i.formData,g=o.form(),y=function(e,t){t&&t.hasOwnProperty(\"value\")&&t.hasOwnProperty(\"options\")?g.append(e,t.value,t.options):g.append(e,t)};for(var v in l)if(l.hasOwnProperty(v)){var _=l[v];if(_ instanceof Array)for(var q=0;q<_.length;q++)y(v,_[q]);else y(v,_)}}if(i.qs&&o.qs(i.qs),o.uri.path?o.path=o.uri.path:o.path=o.uri.pathname+(o.uri.search||\"\"),0===o.path.length&&(o.path=\"/\"),i.aws&&o.aws(i.aws),i.hawk&&o.hawk(i.hawk),i.httpSignature&&o.httpSignature(i.httpSignature),i.auth&&(Object.prototype.hasOwnProperty.call(i.auth,\"username\")&&(i.auth.user=i.auth.username),Object.prototype.hasOwnProperty.call(i.auth,\"password\")&&(i.auth.pass=i.auth.password),o.auth(i.auth.user,i.auth.pass,i.auth.sendImmediately,i.auth.bearer)),o.gzip&&!o.hasHeader(\"accept-encoding\")&&o.setHeader(\"accept-encoding\",\"gzip, deflate\"),o.uri.auth&&!o.hasHeader(\"authorization\")){var k=o.uri.auth.split(\":\").map(function(e){return o._qs.unescape(e)});o.auth(k[0],k.slice(1).join(\":\"),!0)}if(!o.tunnel&&o.proxy&&o.proxy.auth&&!o.hasHeader(\"proxy-authorization\")){var w=o.proxy.auth.split(\":\").map(function(e){return o._qs.unescape(e)}),H=\"Basic \"+C(w.join(\":\"));o.setHeader(\"proxy-authorization\",H)}function S(){var e;(f(o.body)&&(o.body=E.from(o.body)),o.hasHeader(\"content-length\"))||((e=\"string\"==typeof o.body?E.byteLength(o.body):Array.isArray(o.body)?o.body.reduce(function(e,t){return e+t.length},0):o.body.length)?o.setHeader(\"content-length\",e):o.emit(\"error\",new Error(\"Argument error, options.body.\")))}o.proxy&&!o.tunnel&&(o.path=o.uri.protocol+\"//\"+o.uri.host+o.path),i.json&&o.json(i.json),i.multipart&&o.multipart(i.multipart),i.time&&(o.timing=!0,o.elapsedTime=o.elapsedTime||0),o.body&&!m(o.body)&&S(),i.oauth?o.oauth(i.oauth):o._oauth.params&&o.hasHeader(\"authorization\")&&o.oauth(o._oauth.params);var x=o.proxy&&!o.tunnel?o.proxy.protocol:o.uri.protocol,T={\"http:\":e,\"https:\":t},j=o.httpModules||{};if(o.httpModule=j[x]||T[x],!o.httpModule)return o.emit(\"error\",new Error(\"Invalid protocol: \"+x));if(i.ca&&(o.ca=i.ca),!o.agent)if(i.agentOptions&&(o.agentOptions=i.agentOptions),i.agentClass)o.agentClass=i.agentClass;else if(i.forever){var A=U();0===A.major&&A.minor<=10?o.agentClass=\"http:\"===x?c:c.SSL:(o.agentClass=o.httpModule.Agent,o.agentOptions=o.agentOptions||{},o.agentOptions.keepAlive=!0)}else o.agentClass=o.httpModule.Agent;!1===o.pool?o.agent=!1:o.agent=o.agent||o.getNewAgent(),o.on(\"pipe\",function(e){if(o.ntick&&o._started&&o.emit(\"error\",new Error(\"You cannot pipe to this stream after the outbound request has started.\")),o.src=e,O(e))o.hasHeader(\"content-type\")||o.setHeader(\"content-type\",u.lookup(e.path));else{if(e.headers)for(var t in e.headers)o.hasHeader(t)||o.setHeader(t,e.headers[t]);o._json&&!o.hasHeader(\"content-type\")&&o.setHeader(\"content-type\",\"application/json\"),e.method&&!o.explicitMethod&&(o.method=e.method)}}),R(function(){if(!o._aborted){var e=function(){if(o._form&&(o._auth.hasAuth?o._auth.hasAuth&&o._auth.sentAuth&&o._form.pipe(o):o._form.pipe(o)),o._multipart&&o._multipart.chunked&&o._multipart.body.pipe(o),o.body)m(o.body)?o.body.pipe(o):(S(),Array.isArray(o.body)?o.body.forEach(function(e){o.write(e)}):o.write(o.body),o.end());else if(o.requestBodyStream)console.warn(\"options.requestBodyStream is deprecated, please pass the request object to stream.pipe.\"),o.requestBodyStream.pipe(o);else if(!o.src){if(o._auth.hasAuth&&!o._auth.sentAuth)return void o.end();\"GET\"!==o.method&&void 0!==o.method&&o.setHeader(\"content-length\",0),o.end()}};o._form&&!o.hasHeader(\"content-length\")?(o.setHeader(o._form.getHeaders(),!0),o._form.getLength(function(t,r){t||isNaN(r)||o.setHeader(\"content-length\",r),e()})):e(),o.ntick=!0}})},I.prototype.getNewAgent=function(){var e=this.agentClass,t={};if(this.agentOptions)for(var i in this.agentOptions)t[i]=this.agentOptions[i];this.ca&&(t.ca=this.ca),this.ciphers&&(t.ciphers=this.ciphers),this.secureProtocol&&(t.secureProtocol=this.secureProtocol),this.secureOptions&&(t.secureOptions=this.secureOptions),void 0!==this.rejectUnauthorized&&(t.rejectUnauthorized=this.rejectUnauthorized),this.cert&&this.key&&(t.key=this.key,t.cert=this.cert),this.pfx&&(t.pfx=this.pfx),this.passphrase&&(t.passphrase=this.passphrase);var o=\"\";e!==this.httpModule.Agent&&(o+=e.name);var s=this.proxy;return\"string\"==typeof s&&(s=r.parse(s)),(s&&\"https:\"===s.protocol||\"https:\"===this.uri.protocol)&&(t.ca&&(o&&(o+=\":\"),o+=t.ca),void 0!==t.rejectUnauthorized&&(o&&(o+=\":\"),o+=t.rejectUnauthorized),t.cert&&(o&&(o+=\":\"),o+=t.cert.toString(\"ascii\")+t.key.toString(\"ascii\")),t.pfx&&(o&&(o+=\":\"),o+=t.pfx.toString(\"ascii\")),t.ciphers&&(o&&(o+=\":\"),o+=t.ciphers),t.secureProtocol&&(o&&(o+=\":\"),o+=t.secureProtocol),t.secureOptions&&(o&&(o+=\":\"),o+=t.secureOptions)),this.pool===N&&!o&&0===Object.keys(t).length&&this.httpModule.globalAgent?this.httpModule.globalAgent:(o=this.uri.protocol+o,this.pool[o]||(this.pool[o]=new e(t),this.pool.maxSockets&&(this.pool[o].maxSockets=this.pool.maxSockets)),this.pool[o])},I.prototype.start=function(){var e=this;if(e.timing)var t=(new Date).getTime(),r=T();if(!e._aborted){e._started=!0,e.method=e.method||\"GET\",e.href=e.uri.href,e.src&&e.src.stat&&e.src.stat.size&&!e.hasHeader(\"content-length\")&&e.setHeader(\"content-length\",e.src.stat.size),e._aws&&e.aws(e._aws,!0);var i,o=z(e);delete o.auth,B(\"make request\",e.uri.href),delete o.timeout;try{e.req=e.httpModule.request(o)}catch(s){return void e.emit(\"error\",s)}e.timing&&(e.startTime=t,e.startTimeNow=r,e.timings={}),e.timeout&&!e.timeoutTimer&&(e.timeout<0?i=0:\"number\"==typeof e.timeout&&isFinite(e.timeout)&&(i=e.timeout)),e.req.on(\"response\",e.onRequestResponse.bind(e)),e.req.on(\"error\",e.onRequestError.bind(e)),e.req.on(\"drain\",function(){e.emit(\"drain\")}),e.req.on(\"socket\",function(t){var r=t._connecting||t.connecting;if(e.timing&&(e.timings.socket=T()-e.startTimeNow,r)){var o=function(){e.timings.lookup=T()-e.startTimeNow},s=function(){e.timings.connect=T()-e.startTimeNow};t.once(\"lookup\",o),t.once(\"connect\",s),e.req.once(\"error\",function(){t.removeListener(\"lookup\",o),t.removeListener(\"connect\",s)})}var n=function(){e.req.setTimeout(i,function(){if(e.req){e.abort();var t=new Error(\"ESOCKETTIMEDOUT\");t.code=\"ESOCKETTIMEDOUT\",t.connect=!1,e.emit(\"error\",t)}})};if(void 0!==i)if(r){var a=function(){t.removeListener(\"connect\",a),e.clearTimeout(),n()};t.on(\"connect\",a),e.req.on(\"error\",function(e){t.removeListener(\"connect\",a)}),e.timeoutTimer=setTimeout(function(){t.removeListener(\"connect\",a),e.abort();var r=new Error(\"ETIMEDOUT\");r.code=\"ETIMEDOUT\",r.connect=!0,e.emit(\"error\",r)},i)}else n();e.emit(\"socket\",t)}),e.emit(\"request\",e.req)}},I.prototype.onRequestError=function(e){if(!this._aborted){if(this.req&&this.req._reusedSocket&&\"ECONNRESET\"===e.code&&this.agent.addRequestNoreuse)return this.agent={addRequest:this.agent.addRequestNoreuse.bind(this.agent)},this.start(),void this.req.end();this.clearTimeout(),this.emit(\"error\",e)}},I.prototype.onRequestResponse=function(e){var r=this;if(r.timing&&(r.timings.response=T()-r.startTimeNow),B(\"onRequestResponse\",r.uri.href,e.statusCode,e.headers),e.on(\"end\",function(){r.timing&&(r.timings.end=T()-r.startTimeNow,e.timingStart=r.startTime,r.timings.socket||(r.timings.socket=0),r.timings.lookup||(r.timings.lookup=r.timings.socket),r.timings.connect||(r.timings.connect=r.timings.lookup),r.timings.response||(r.timings.response=r.timings.connect),B(\"elapsed time\",r.timings.end),r.elapsedTime+=Math.round(r.timings.end),e.elapsedTime=r.elapsedTime,e.timings=r.timings,e.timingPhases={wait:r.timings.socket,dns:r.timings.lookup-r.timings.socket,tcp:r.timings.connect-r.timings.lookup,firstByte:r.timings.response-r.timings.connect,download:r.timings.end-r.timings.response,total:r.timings.end}),B(\"response end\",r.uri.href,e.statusCode,e.headers)}),r._aborted)return B(\"aborted\",r.uri.href),void e.resume();if(r.response=e,e.request=r,e.toJSON=D,r.httpModule!==t||!r.strictSSL||e.hasOwnProperty(\"socket\")&&e.socket.authorized){r.originalHost=r.getHeader(\"host\"),r.originalHostHeaderName||(r.originalHostHeaderName=r.hasHeader(\"host\")),r.setHost&&r.removeHeader(\"host\"),r.clearTimeout();var i=r._jar&&r._jar.setCookie?r._jar:A,o=function(e){try{i.setCookie(e,r.uri.href,{ignoreError:!0})}catch(t){r.emit(\"error\",t)}};if(e.caseless=p(e.headers),e.caseless.has(\"set-cookie\")&&!r._disableCookies){var n=e.caseless.has(\"set-cookie\");Array.isArray(e.headers[n])?e.headers[n].forEach(o):o(e.headers[n])}if(!r._redirect.onResponse(e)){e.on(\"close\",function(){r._ended||r.response.emit(\"end\")}),e.once(\"end\",function(){r._ended=!0});var a,h;if(!r.gzip||(h=e.statusCode,\"HEAD\"===r.method||h>=100&&h<200||204===h||304===h))a=e;else{var u=e.headers[\"content-encoding\"]||\"identity\";u=u.trim().toLowerCase();var c={flush:s.Z_SYNC_FLUSH,finishFlush:s.Z_SYNC_FLUSH};\"gzip\"===u?(a=s.createGunzip(c),e.pipe(a)):\"deflate\"===u?(a=s.createInflate(c),e.pipe(a)):(\"identity\"!==u&&B(\"ignoring unrecognized Content-Encoding \"+u),a=e)}r.encoding&&(0!==r.dests.length?console.error(\"Ignoring encoding parameter as this stream is being piped to another stream which makes the encoding option invalid.\"):a.setEncoding(r.encoding)),r._paused&&a.pause(),r.responseContent=a,r.emit(\"response\",e),r.dests.forEach(function(e){r.pipeDest(e)}),a.on(\"data\",function(t){r.timing&&!r.responseStarted&&(r.responseStartTime=(new Date).getTime(),e.responseStartTime=r.responseStartTime),r._destdata=!0,r.emit(\"data\",t)}),a.once(\"end\",function(e){r.emit(\"end\",e)}),a.on(\"error\",function(e){r.emit(\"error\",e)}),a.on(\"close\",function(){r.emit(\"close\")}),r.callback?r.readResponseBody(e):r.on(\"end\",function(){r._aborted?B(\"aborted\",r.uri.href):r.emit(\"complete\",e)}),B(\"finish init function\",r.uri.href)}}else{B(\"strict ssl error\",r.uri.href);var d=e.hasOwnProperty(\"socket\")?e.socket.authorizationError:r.uri.href+\" does not support SSL\";r.emit(\"error\",new Error(\"SSL Error: \"+d))}},I.prototype.readResponseBody=function(e){var t=this;B(\"reading response's body\");var r=[],i=0,o=[];t.on(\"data\",function(e){E.isBuffer(e)?e.length&&(i+=e.length,r.push(e)):o.push(e)}),t.on(\"end\",function(){if(B(\"end event\",t.uri.href),t._aborted)return B(\"aborted\",t.uri.href),r=[],void(i=0);if(i?(B(\"has body\",t.uri.href,i),e.body=E.concat(r,i),null!==t.encoding&&(e.body=e.body.toString(t.encoding)),r=[],i=0):o.length&&(\"utf8\"===t.encoding&&o[0].length>0&&\"\\ufeff\"===o[0][0]&&(o[0]=o[0].substring(1)),e.body=o.join(\"\")),t._json)try{e.body=JSON.parse(e.body,t._jsonReviver)}catch(s){B(\"invalid JSON received\",t.uri.href)}B(\"emitting complete\",t.uri.href),void 0!==e.body||t._json||(e.body=null===t.encoding?E.alloc(0):\"\"),t.emit(\"complete\",e,e.body)})},I.prototype.abort=function(){this._aborted=!0,this.req?this.req.abort():this.response&&this.response.destroy(),this.clearTimeout(),this.emit(\"abort\")},I.prototype.pipeDest=function(e){var t=this.response;if(e.headers&&!e.headersSent){if(t.caseless.has(\"content-type\")){var r=t.caseless.has(\"content-type\");e.setHeader?e.setHeader(r,t.headers[r]):e.headers[r]=t.headers[r]}if(t.caseless.has(\"content-length\")){var i=t.caseless.has(\"content-length\");e.setHeader?e.setHeader(i,t.headers[i]):e.headers[i]=t.headers[i]}}if(e.setHeader&&!e.headersSent){for(var o in t.headers)this.gzip&&\"content-encoding\"===o||e.setHeader(o,t.headers[o]);e.statusCode=t.statusCode}this.pipefilter&&this.pipefilter(t,e)},I.prototype.qs=function(e,t){var i;for(var o in i=!t&&this.uri.query?this._qs.parse(this.uri.query):{},e)i[o]=e[o];var s=this._qs.stringify(i);return\"\"===s?this:(this.uri=r.parse(this.uri.href.split(\"?\")[0]+\"?\"+s),this.url=this.uri,this.path=this.uri.path,\"unix\"===this.uri.host&&this.enableUnixSocket(),this)},I.prototype.form=function(e){var t=this;return e?(/^application\\/x-www-form-urlencoded\\b/.test(t.getHeader(\"content-type\"))||t.setHeader(\"content-type\",\"application/x-www-form-urlencoded\"),t.body=\"string\"==typeof e?t._qs.rfc3986(e.toString(\"utf8\")):t._qs.stringify(e).toString(\"utf8\"),t):(t._form=new d,t._form.on(\"error\",function(e){e.message=\"form-data: \"+e.message,t.emit(\"error\",e),t.abort()}),t._form)},I.prototype.multipart=function(e){return this._multipart.onRequest(e),this._multipart.chunked||(this.body=this._multipart.body),this},I.prototype.json=function(e){return this.hasHeader(\"accept\")||this.setHeader(\"accept\",\"application/json\"),\"function\"==typeof this.jsonReplacer&&(this._jsonReplacer=this.jsonReplacer),this._json=!0,\"boolean\"==typeof e?void 0!==this.body&&(/^application\\/x-www-form-urlencoded\\b/.test(this.getHeader(\"content-type\"))?this.body=this._qs.rfc3986(this.body):this.body=j(this.body,this._jsonReplacer),this.hasHeader(\"content-type\")||this.setHeader(\"content-type\",\"application/json\")):(this.body=j(e,this._jsonReplacer),this.hasHeader(\"content-type\")||this.setHeader(\"content-type\",\"application/json\")),\"function\"==typeof this.jsonReviver&&(this._jsonReviver=this.jsonReviver),this},I.prototype.getHeader=function(e,t){var r,i;return t||(t=this.headers),Object.keys(t).forEach(function(o){o.length===e.length&&(i=new RegExp(e,\"i\"),o.match(i)&&(r=t[o]))}),r},I.prototype.enableUnixSocket=function(){var e=this.uri.path.split(\":\"),t=e[0],r=e[1];this.socketPath=t,this.uri.pathname=r,this.uri.path=r,this.uri.host=t,this.uri.hostname=t,this.uri.isUnix=!0},I.prototype.auth=function(e,t,r,i){return this._auth.onRequest(e,t,r,i),this},I.prototype.aws=function(e,t){if(!t)return this._aws=e,this;if(4===e.sign_version||\"4\"===e.sign_version){var r={host:this.uri.host,path:this.uri.path,method:this.method,headers:this.headers,body:this.body};e.service&&(r.service=e.service);var i=a.sign(r,{accessKeyId:e.key,secretAccessKey:e.secret,sessionToken:e.session});this.setHeader(\"authorization\",i.headers.Authorization),this.setHeader(\"x-amz-date\",i.headers[\"X-Amz-Date\"]),i.headers[\"X-Amz-Security-Token\"]&&this.setHeader(\"x-amz-security-token\",i.headers[\"X-Amz-Security-Token\"])}else{var o=new Date;this.setHeader(\"date\",o.toUTCString());var s={key:e.key,secret:e.secret,verb:this.method.toUpperCase(),date:o,contentType:this.getHeader(\"content-type\")||\"\",md5:this.getHeader(\"content-md5\")||\"\",amazonHeaders:n.canonicalizeHeaders(this.headers)},h=this.uri.path;e.bucket&&h?s.resource=\"/\"+e.bucket+h:e.bucket&&!h?s.resource=\"/\"+e.bucket:!e.bucket&&h?s.resource=h:e.bucket||h||(s.resource=\"/\"),s.resource=n.canonicalizeResource(s.resource),this.setHeader(\"authorization\",n.authorization(s))}return this},I.prototype.httpSignature=function(e){var t=this;return h.signRequest({getHeader:function(e){return t.getHeader(e,t.headers)},setHeader:function(e,r){t.setHeader(e,r)},method:t.method,path:t.path},e),B(\"httpSignature authorization\",t.getHeader(\"authorization\")),t},I.prototype.hawk=function(e){this.setHeader(\"Authorization\",w.header(this.uri,this.method,e))},I.prototype.oauth=function(e){return this._oauth.onRequest(e),this},I.prototype.jar=function(e){var t;if(0===this._redirect.redirectsFollowed&&(this.originalCookieHeader=this.getHeader(\"cookie\")),e){var r=e.getCookieString?e:A,i=this.uri.href;r&&(t=r.getCookieString(i))}else t=!1,this._disableCookies=!0;return t&&t.length&&(this.originalCookieHeader?this.setHeader(\"cookie\",this.originalCookieHeader+\"; \"+t):this.setHeader(\"cookie\",t)),this._jar=e,this},I.prototype.pipe=function(e,t){if(!this.response)return this.dests.push(e),o.Stream.prototype.pipe.call(this,e,t),e;if(this._destdata)this.emit(\"error\",new Error(\"You cannot pipe after data has been emitted from the response.\"));else{if(!this._ended)return o.Stream.prototype.pipe.call(this,e,t),this.pipeDest(e),e;this.emit(\"error\",new Error(\"You cannot pipe after the response has been ended.\"))}},I.prototype.write=function(){if(!this._aborted)return this._started||this.start(),this.req?this.req.write.apply(this.req,arguments):void 0},I.prototype.end=function(e){this._aborted||(e&&this.write(e),this._started||this.start(),this.req&&this.req.end())},I.prototype.pause=function(){this.responseContent?this.responseContent.pause.apply(this.responseContent,arguments):this._paused=!0},I.prototype.resume=function(){this.responseContent?this.responseContent.resume.apply(this.responseContent,arguments):this._paused=!1},I.prototype.destroy=function(){this.clearTimeout(),this._ended?this.response&&this.response.destroy():this.end()},I.prototype.clearTimeout=function(){this.timeoutTimer&&(clearTimeout(this.timeoutTimer),this.timeoutTimer=null)},I.defaultProxyHeaderWhiteList=x.defaultProxyHeaderWhiteList.slice(),I.defaultProxyHeaderExclusiveList=x.defaultProxyHeaderExclusiveList.slice(),I.prototype.toJSON=M,module.exports=I;"},"sourceMaps":null,"error":null,"hash":"359246deec581e2031b4c4875528f97b","cacheData":{"env":{}}}