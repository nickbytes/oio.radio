{"id":"G2Sn","dependencies":[{"name":"/Users/m/www/oio/land/oio.radio/package.json","includedInParent":true,"mtime":1585257763511},{"name":"/Users/m/www/oio/land/oio.radio/node_modules/request/package.json","includedInParent":true,"mtime":1585257763171},{"name":"url","loc":{"line":3,"column":18},"parent":"/Users/m/www/oio/land/oio.radio/node_modules/request/lib/oauth.js","resolved":"/Users/m/.config/yarn/global/node_modules/url/url.js"},{"name":"qs","loc":{"line":4,"column":17},"parent":"/Users/m/www/oio/land/oio.radio/node_modules/request/lib/oauth.js","resolved":"/Users/m/www/oio/land/oio.radio/node_modules/qs/lib/index.js"},{"name":"caseless","loc":{"line":5,"column":23},"parent":"/Users/m/www/oio/land/oio.radio/node_modules/request/lib/oauth.js","resolved":"/Users/m/www/oio/land/oio.radio/node_modules/caseless/index.js"},{"name":"uuid/v4","loc":{"line":6,"column":19},"parent":"/Users/m/www/oio/land/oio.radio/node_modules/request/lib/oauth.js","resolved":"/Users/m/www/oio/land/oio.radio/node_modules/uuid/v4.js"},{"name":"oauth-sign","loc":{"line":7,"column":20},"parent":"/Users/m/www/oio/land/oio.radio/node_modules/request/lib/oauth.js","resolved":"/Users/m/www/oio/land/oio.radio/node_modules/oauth-sign/index.js"},{"name":"crypto","loc":{"line":8,"column":21},"parent":"/Users/m/www/oio/land/oio.radio/node_modules/request/lib/oauth.js","resolved":"/Users/m/.config/yarn/global/node_modules/crypto-browserify/index.js"},{"name":"safe-buffer","loc":{"line":9,"column":21},"parent":"/Users/m/www/oio/land/oio.radio/node_modules/request/lib/oauth.js","resolved":"/Users/m/www/oio/land/oio.radio/node_modules/safe-buffer/index.js"}],"generated":{"js":"\n\"use strict\";var e=require(\"url\"),t=require(\"qs\"),r=require(\"caseless\"),a=require(\"uuid/v4\"),o=require(\"oauth-sign\"),s=require(\"crypto\"),u=require(\"safe-buffer\").Buffer;function i(e){this.request=e,this.params=null}i.prototype.buildParams=function(e,t,r,s,u,i){var h={};for(var n in e)h[\"oauth_\"+n]=e[n];h.oauth_version||(h.oauth_version=\"1.0\"),h.oauth_timestamp||(h.oauth_timestamp=Math.floor(Date.now()/1e3).toString()),h.oauth_nonce||(h.oauth_nonce=a().replace(/-/g,\"\")),h.oauth_signature_method||(h.oauth_signature_method=\"HMAC-SHA1\");var d=h.oauth_consumer_secret||h.oauth_private_key;delete h.oauth_consumer_secret,delete h.oauth_private_key;var c=h.oauth_token_secret;delete h.oauth_token_secret;var _=h.oauth_realm;delete h.oauth_realm,delete h.oauth_transport_method;var m=t.protocol+\"//\"+t.host+t.pathname,p=i.parse([].concat(s,u,i.stringify(h)).join(\"&\"));return h.oauth_signature=o.sign(h.oauth_signature_method,r,m,p,d,c),_&&(h.realm=_),h},i.prototype.buildBodyHash=function(e,t){[\"HMAC-SHA1\",\"RSA-SHA1\"].indexOf(e.signature_method||\"HMAC-SHA1\")<0&&this.request.emit(\"error\",new Error(\"oauth: \"+e.signature_method+\" signature_method not supported with body_hash signing.\"));var r=s.createHash(\"sha1\");r.update(t||\"\");var a=r.digest(\"hex\");return u.from(a,\"hex\").toString(\"base64\")},i.prototype.concatParams=function(e,t,r){r=r||\"\";var a=Object.keys(e).filter(function(e){return\"realm\"!==e&&\"oauth_signature\"!==e}).sort();return e.realm&&a.splice(0,0,\"realm\"),a.push(\"oauth_signature\"),a.map(function(t){return t+\"=\"+r+o.rfc3986(e[t])+r}).join(t)},i.prototype.onRequest=function(a){this.params=a;var o,s,u=this.request.uri||{},i=this.request.method||\"\",h=r(this.request.headers),n=this.request.body||\"\",d=this.request.qsLib||t,c=h.get(\"content-type\")||\"\",_=\"application/x-www-form-urlencoded\",m=a.transport_method||\"header\";c.slice(0,_.length)===_&&(c=_,o=n),u.query&&(s=u.query),\"body\"!==m||\"POST\"===i&&c===_||this.request.emit(\"error\",new Error(\"oauth: transport_method of body requires POST and content-type \"+_)),o||\"boolean\"!=typeof a.body_hash||(a.body_hash=this.buildBodyHash(a,this.request.body.toString()));var p=this.buildParams(a,u,i,s,o,d);switch(m){case\"header\":this.request.setHeader(\"Authorization\",\"OAuth \"+this.concatParams(p,\",\",'\"'));break;case\"query\":var l=this.request.uri.href+=(s?\"&\":\"?\")+this.concatParams(p,\"&\");this.request.uri=e.parse(l),this.request.path=this.request.uri.path;break;case\"body\":this.request.body=(o?o+\"&\":\"\")+this.concatParams(p,\"&\");break;default:this.request.emit(\"error\",new Error(\"oauth: transport_method invalid\"))}},exports.OAuth=i;"},"sourceMaps":null,"error":null,"hash":"0ad687cb1fe2550be8f4614cf96244ca","cacheData":{"env":{}}}