{"id":"yXX3","dependencies":[{"name":"/Users/m/www/oio/land/oio.radio/package.json","includedInParent":true,"mtime":1585257763511},{"name":"/Users/m/www/oio/land/oio.radio/node_modules/http-signature/package.json","includedInParent":true,"mtime":1585257763157},{"name":"assert-plus","loc":{"line":3,"column":21},"parent":"/Users/m/www/oio/land/oio.radio/node_modules/http-signature/lib/parser.js","resolved":"/Users/m/www/oio/land/oio.radio/node_modules/assert-plus/assert.js"},{"name":"util","loc":{"line":4,"column":19},"parent":"/Users/m/www/oio/land/oio.radio/node_modules/http-signature/lib/parser.js","resolved":"/Users/m/.config/yarn/global/node_modules/util/util.js"},{"name":"./utils","loc":{"line":5,"column":20},"parent":"/Users/m/www/oio/land/oio.radio/node_modules/http-signature/lib/parser.js","resolved":"/Users/m/www/oio/land/oio.radio/node_modules/http-signature/lib/utils.js"}],"generated":{"js":"var e=require(\"assert-plus\"),a=require(\"util\"),r=require(\"./utils\"),t=r.HASH_ALGOS,s=r.PK_ALGOS,i=r.HttpSignatureError,o=r.InvalidAlgorithmError,n=r.validateAlgorithm,h={New:0,Params:1},d={Name:0,Quote:1,Value:2,Comma:3};function m(e){i.call(this,e,m)}function w(e){i.call(this,e,w)}function l(e){i.call(this,e,l)}function c(e){i.call(this,e,c)}function p(e){i.call(this,e,p)}a.inherits(m,i),a.inherits(w,i),a.inherits(l,i),a.inherits(c,i),a.inherits(p,i),module.exports={parseRequest:function(a,r){e.object(a,\"request\"),e.object(a.headers,\"request.headers\"),void 0===r&&(r={}),void 0===r.headers&&(r.headers=[a.headers[\"x-date\"]?\"x-date\":\"date\"]),e.object(r,\"options\"),e.arrayOfString(r.headers,\"options.headers\"),e.optionalFinite(r.clockSkew,\"options.clockSkew\");var t=r.authorizationHeaderName||\"authorization\";if(!a.headers[t])throw new c(\"no \"+t+\" header present in the request\");r.clockSkew=r.clockSkew||300;var s,i=0,g=h.New,u=d.Name,f=\"\",k=\"\",b={scheme:\"\",params:{},signingString:\"\"},S=a.headers[t];for(i=0;i<S.length;i++){var v=S.charAt(i);switch(Number(g)){case h.New:\" \"!==v?b.scheme+=v:g=h.Params;break;case h.Params:switch(Number(u)){case d.Name:var q=v.charCodeAt(0);if(q>=65&&q<=90||q>=97&&q<=122)f+=v;else{if(\"=\"!==v)throw new w(\"bad param format\");if(0===f.length)throw new w(\"bad param format\");u=d.Quote}break;case d.Quote:if('\"'!==v)throw new w(\"bad param format\");k=\"\",u=d.Value;break;case d.Value:'\"'===v?(b.params[f]=k,u=d.Comma):k+=v;break;case d.Comma:if(\",\"!==v)throw new w(\"bad param format\");f=\"\",u=d.Name;break;default:throw new Error(\"Invalid substate\")}break;default:throw new Error(\"Invalid substate\")}}if(b.params.headers&&\"\"!==b.params.headers?b.params.headers=b.params.headers.split(\" \"):a.headers[\"x-date\"]?b.params.headers=[\"x-date\"]:b.params.headers=[\"date\"],!b.scheme||\"Signature\"!==b.scheme)throw new w('scheme was not \"Signature\"');if(!b.params.keyId)throw new w(\"keyId was not specified\");if(!b.params.algorithm)throw new w(\"algorithm was not specified\");if(!b.params.signature)throw new w(\"signature was not specified\");b.params.algorithm=b.params.algorithm.toLowerCase();try{n(b.params.algorithm)}catch(I){throw I instanceof o?new l(b.params.algorithm+\" is not supported\"):I}for(i=0;i<b.params.headers.length;i++){var x=b.params.headers[i].toLowerCase();if(b.params.headers[i]=x,\"request-line\"===x){if(r.strict)throw new p(\"request-line is not a valid header with strict parsing enabled.\");b.signingString+=a.method+\" \"+a.url+\" HTTP/\"+a.httpVersion}else if(\"(request-target)\"===x)b.signingString+=\"(request-target): \"+a.method.toLowerCase()+\" \"+a.url;else{var N=a.headers[x];if(void 0===N)throw new c(x+\" was not in the request\");b.signingString+=x+\": \"+N}i+1<b.params.headers.length&&(b.signingString+=\"\\n\")}if(a.headers.date||a.headers[\"x-date\"]){s=a.headers[\"x-date\"]?new Date(a.headers[\"x-date\"]):new Date(a.headers.date);var C=new Date,A=Math.abs(C.getTime()-s.getTime());if(A>1e3*r.clockSkew)throw new m(\"clock skew of \"+A/1e3+\"s was greater than \"+r.clockSkew+\"s\")}if(r.headers.forEach(function(e){if(b.params.headers.indexOf(e.toLowerCase())<0)throw new c(e+\" was not a signed header\")}),r.algorithms&&-1===r.algorithms.indexOf(b.params.algorithm))throw new l(b.params.algorithm+\" is not a supported algorithm\");return b.algorithm=b.params.algorithm.toUpperCase(),b.keyId=b.params.keyId,b}};"},"sourceMaps":null,"error":null,"hash":"f307930083cdaebb36d0825a550d16d6","cacheData":{"env":{}}}